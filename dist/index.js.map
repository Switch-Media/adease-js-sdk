{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 91eadd1fa8f6ec0df0ee","webpack:///./src/index.ts","webpack:///./src/Adease.ts","webpack:///external \"immutable\"","webpack:///./src/Configuration.ts"],"names":["Object","defineProperty","exports","value","Adease_1","require","Adease","default","immutable_1","Configuration_1","sentBeacons","Set","lastTimePosition","NaN","url","reset","fetch","then","res","json","fromJSON","config","_","undefined","object","ensureSetup","getConfig","streams","time","sendBeacons","ps","getAdsForTime","map","ad","trackingUrls","filter","LinearEvents","includes","tURL","kind","startTime","Promise","resolve","add","mode","all","getAdBreaks","endTime","Error","clear","EventType","NonLinearEvents","CreativeView","AcceptInvitation","AdExpand","Minimize","Close","OverlayViewDuration","Start","Impression","FirstQuartile","MidPoint","ThirdQuartile","Complete","AcceptInvitationLinear","TimeSpentViewing","Progress","CloseLinear","PlayerEvents","Mute","Unmute","Pause","Resume","Rewind","Skip","PlayerExpand","PlayerCollapse","Configuration","trackingURLs","reduce","ads","findIndex","t","adID","id","concat","parsedConfiguration","parseFromObject","media","obj","Number","starttime","endtime","event","renditions"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"adease\"] = factory(require(\"immutable\"));\n\telse\n\t\troot[\"adease\"] = factory(root[\"immutable\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 91eadd1fa8f6ec0df0ee","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Adease_1 = require(\"./Adease\");\nexports.Adease = Adease_1.default;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst immutable_1 = require(\"immutable\");\nconst Configuration_1 = require(\"./Configuration\");\nclass Adease {\n    constructor() {\n        this.sentBeacons = immutable_1.Set();\n        this.lastTimePosition = NaN;\n    }\n    /**\n     * Downloads adease configuration from a URL, returning a promise\n     * that resolves with undefined when done.\n     * @param url string\n     * @return Promise<void>\n     */\n    configureFromURL(url) {\n        this.reset();\n        return fetch(url)\n            .then(res => res.json())\n            .then(Configuration_1.default.fromJSON)\n            .then(_ => (this.config = _))\n            .then(() => undefined);\n    }\n    /**\n     * Downloads adease configuration from a URL, returning a promise\n     * that resolves with undefined when done.\n     * @param url string\n     * @return Promise<void>\n     */\n    configureFromObject(object) {\n        this.reset();\n        this.config = Configuration_1.default.fromJSON(object);\n    }\n    getStreams() {\n        this.ensureSetup();\n        return this.config.getConfig().streams;\n    }\n    /**\n     * Notify adease that a time update has occured. This may fire off beacons.\n     * Returns a promise that resolves once all underlying actions have completed.\n     */\n    notifyTimeUpdate(time) {\n        this.ensureSetup();\n        if (this.lastTimePosition === NaN) {\n            this.lastTimePosition = 0;\n        }\n        return this.sendBeacons(time)\n            .then(() => (this.lastTimePosition = time))\n            .then(() => undefined);\n    }\n    /**\n     * @return A promise that resolves once all beacons are sent.\n     */\n    sendBeacons(time) {\n        const ps = this.getAdsForTime(time).map(ad => {\n            return ad.trackingUrls\n                .filter(tURL => Configuration_1.LinearEvents.includes(tURL.kind))\n                .filter(tURL => tURL.startTime < time && tURL.startTime > this.lastTimePosition)\n                .map(tURL => {\n                if (this.sentBeacons.includes(tURL)) {\n                    return Promise.resolve();\n                }\n                this.sentBeacons = this.sentBeacons.add(tURL);\n                return fetch(tURL.url, {\n                    mode: \"no-cors\"\n                });\n            });\n        });\n        return Promise.all(ps).then(() => undefined);\n    }\n    getAdsForTime(time) {\n        return this.config.getAdBreaks().filter(ad => ad.startTime <= time && ad.endTime >= time);\n    }\n    ensureSetup() {\n        if (!this.config) {\n            throw new Error(\"Adease not setup, but method called\");\n        }\n    }\n    /**\n     * Resets the internal state of the object so that it can be reused.\n     */\n    reset() {\n        this.sentBeacons = this.sentBeacons.clear();\n    }\n}\nexports.default = Adease;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Adease.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"immutable\"\n// module id = 2\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventType;\n(function (EventType) {\n    // Basic metrics\n    EventType[\"Impression\"] = \"impression\";\n    EventType[\"Clickthrough\"] = \"clickthrough\";\n    EventType[\"Stream\"] = \"stream\";\n    EventType[\"Fullscreen\"] = \"fullscreen\";\n    EventType[\"ExitFullscreen\"] = \"exitFullscreen\";\n    EventType[\"OtherAdInteraction\"] = \"otherAdInteraction\";\n    // Linear Ad Metrics\n    EventType[\"Start\"] = \"start\";\n    EventType[\"FirstQuartile\"] = \"firstQuartile\";\n    EventType[\"MidPoint\"] = \"midpoint\";\n    EventType[\"ThirdQuartile\"] = \"thirdQuartile\";\n    EventType[\"Complete\"] = \"complete\";\n    EventType[\"AcceptInvitationLinear\"] = \"acceptInvitationLinear\";\n    EventType[\"TimeSpentViewing\"] = \"timeSpentViewing\";\n    EventType[\"Progress\"] = \"progress\";\n    EventType[\"CloseLinear\"] = \"closeLinear\";\n    // Nonlinear Ad Metrics\n    EventType[\"CreativeView\"] = \"creativeView\";\n    EventType[\"AcceptInvitation\"] = \"acceptInvitation\";\n    EventType[\"AdExpand\"] = \"adExpand\";\n    EventType[\"AdCollapse\"] = \"adCollapse\";\n    EventType[\"Minimize\"] = \"minimize\";\n    EventType[\"Close\"] = \"close\";\n    EventType[\"OverlayViewDuration\"] = \"overlayViewDuration\";\n    // Player Operation Metrics (for both Linear and Nonlinear ads)\n    EventType[\"Mute\"] = \"mute\";\n    EventType[\"Unmute\"] = \"unmute\";\n    EventType[\"Pause\"] = \"pause\";\n    EventType[\"Resume\"] = \"resume\";\n    EventType[\"Rewind\"] = \"rewind\";\n    EventType[\"Skip\"] = \"skip\";\n    EventType[\"PlayerExpand\"] = \"playerExpand\";\n    EventType[\"PlayerCollapse\"] = \"playerCollapse\";\n})(EventType = exports.EventType || (exports.EventType = {}));\nexports.NonLinearEvents = [\n    EventType.CreativeView,\n    EventType.AcceptInvitation,\n    EventType.AdExpand,\n    EventType.Minimize,\n    EventType.Close,\n    EventType.OverlayViewDuration\n];\nexports.LinearEvents = [\n    EventType.Start,\n    EventType.Impression,\n    EventType.FirstQuartile,\n    EventType.MidPoint,\n    EventType.ThirdQuartile,\n    EventType.Complete,\n    EventType.AcceptInvitationLinear,\n    EventType.TimeSpentViewing,\n    EventType.Progress,\n    EventType.CloseLinear\n];\nexports.PlayerEvents = [\n    EventType.Mute,\n    EventType.Unmute,\n    EventType.Pause,\n    EventType.Resume,\n    EventType.Rewind,\n    EventType.Skip,\n    EventType.PlayerExpand,\n    EventType.PlayerCollapse\n];\n/**\n * @internal\n */\nclass Configuration {\n    constructor(config) {\n        this.config = config;\n    }\n    static fromJSON(config) {\n        const parsedConfiguration = Configuration.parseFromObject(config);\n        if (parsedConfiguration === null) {\n            throw \"error parsing configuration\";\n        }\n        return new Configuration(parsedConfiguration);\n    }\n    static parseFromObject(json) {\n        if (!(json && json.media && json.media.trackingUrls)) {\n            return null;\n        }\n        return {\n            trackingURLs: json.media.trackingUrls.map(obj => ({\n                url: obj.url,\n                startTime: Number(obj.starttime),\n                endTime: Number(obj.endtime),\n                kind: obj.event,\n                adID: obj.adID\n            })),\n            streams: json.media.renditions.map(obj => ({\n                url: obj.url\n            }))\n        };\n    }\n    getAdBreaks() {\n        if (!this.config || !this.config.trackingURLs) {\n            return [];\n        }\n        return this.config.trackingURLs\n            .filter(tURL => tURL.kind === \"clickthrough\")\n            .reduce((ads, tURL) => {\n            // Try to find an existing ad with this start time.\n            if (ads.findIndex(ad => ad.startTime === tURL.startTime) !== -1) {\n                return ads;\n            }\n            // Get the tracking URLs for this ad.\n            const trackingURLs = this.config.trackingURLs.filter(t => t.adID === tURL.adID &&\n                t.startTime >= tURL.startTime &&\n                t.endTime <= tURL.endTime);\n            const ad = {\n                id: tURL.adID,\n                startTime: tURL.startTime,\n                endTime: tURL.endTime,\n                trackingUrls: trackingURLs\n            };\n            return ads.concat(ad);\n        }, []);\n    }\n    getConfig() {\n        return this.config;\n    }\n    getTrackingURLs() {\n        return this.config.trackingURLs;\n    }\n}\nexports.default = Configuration;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Configuration.ts"],"sourceRoot":""}